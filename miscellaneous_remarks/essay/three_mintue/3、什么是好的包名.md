
## 三、什么是好的包名
> Write shy code - modules that don’t reveal anything unnecessary to other modules and that don’t rely on other modules' implementations. 编写谨慎的代码 - 不向其他模块透露任何不必要的模块，并且不依赖于其他模块的实现。 — Dave Thomas

每个 Go 语言的包实际上都是它一个小小的 Go 语言程序。 正如**函数或方法的实现对调用者而言并不重要**一样，**包的公共API-其函数、方法以及类型的实现对于调用者来说也并不重要**。

一个好的 Go 语言包应该具有**低程度的源码级耦合**，这样，随着项目的增长，**对一个包的更改不会跨代码库级联**。 这些世界末日的重构严格限制了代码库的变化率以及在该代码库中工作的成员的生产率。

在本节中，我们将讨论如何设计包，包括**包的名称**，**命名类型**以及**编写方法和函数的技巧**。

### 3.1 一个好的包从它的名字开始
将你的包名用一个词来描述它。

我遵循的经验法则不是“我应该在这个包中放入什么类型的？”。相反，我要问是“**该包提供的服务是什么？**”通常这个问题的答案不是“这个包提供 X 类型”，而是“这个包提供 HTTP”。

> 贴士: 以包所提供的内容来命名，而不是它包含的内容。

#### 4.1.1 好的包名应该是唯一的。
在你的项目里，每个包名应该是唯一的。如果你遵循“包名应该根据包是做什么的取名”这条建议，包名的唯一性很容易达到。如果你发现你有两个相似的包名，那可能是下面两种情况之一：

1. 包的名字太普通了。
2. 该包与另一个类似名称的包重叠了。在这种情况下，您应该检查你的设计，或考虑合并包。

### 4.2 避免使用类似 `base`，`common` 或 `util` 的包名称

常见的不好的包名是`utility` 包。这个包主要是存放一些在编码过程中的帮助类和工具函数。因为这个包存放了很多不相关的函数，所以很难从这个包提供了什么
这方面来命名它。所以人们根据它所包含的内容来命名，取名为`utilities` 。

在包层次很深的大型项目中，人们想要在不出现循环依赖的情况下共享帮助类和工具函数，所以在这种项目中经常看到`utils`或`helpers`包。人们通过将帮助类和工具函数抽取
到新的包里来解决循环依赖，所以该包的出现是由于项目的设计问题，所以其名称不能体现他的目的和用途，这个包而仅仅是用来打破之前存在的循环依赖问题。

我推荐通过分析工具类被哪些包调用，并将这些工具类移动到需要调用他们的包中来优化 `utils` 和 `helpers` 包名。可能这会造成一定的工具函数代码冗余，
但是这也比在两个包之间引入依赖要好。

> [A little] duplication is far cheaper than the wrong abstraction. ([一点点]重复比错误的抽象的性价比高很多。) — Sandy Metz

在使用 `utility` 程序的情况下，最好选多个包，每个包专注于单个方面，而不是选单一的整体包。

> 贴士: 使用复数形式命名 `utility` 包。例如 `strings` 来处理字符串。

